<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- 
        MonopALLy - Edition Sp√©ciale 10 Ans
        
        Features d√©velopp√©es :
        - 20 cases interactives avec messages cach√©s
        - Quiz avec questions personnalis√©es et choix multiples
        - Syst√®me de progression
        - Bouton reset pour recommencer
        - Animations et confettis √† la fin
        - Design aux couleurs Accor ALL (bleu #14143A et dor√© #E4CBA5)
        
        Fait avec HTML, CSS et JavaScript vanilla - pas de framework n√©cessaire !
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MonopALLy - 10 Ans Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #14143A;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            background: white;
            padding: 20px 50px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            color: #14143A;
            font-size: 2.5rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .header h1 .gold {
            color: #E4CBA5;
            text-shadow: 
                -1px -1px 0 #14143A,
                1px -1px 0 #14143A,
                -1px 1px 0 #14143A,
                1px 1px 0 #14143A;
        }

        .board-container {
            background: #1a1a4a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        .board {
            width: 500px;
            height: 500px;
            background: #E4CBA5;
            position: relative;
            display: grid;
            grid-template-columns: 90px repeat(4, 80px) 90px;
            grid-template-rows: 90px repeat(4, 80px) 90px;
            border: 2px solid #14143A;
        }

        .center {
            grid-column: 2 / 6;
            grid-row: 2 / 6;
            background: #14143A;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
            border: 2px solid #E4CBA5;
        }

        .center h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            margin-bottom: 5px;
            font-weight: 700;
            color: #E4CBA5;
        }

        .center p {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.3;
            color: #E4CBA5;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .center button {
            background: #E4CBA5;
            color: #14143A;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
        }

        .center button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(228, 203, 165, 0.3);
        }

        .property {
            background: white;
            border: 1px solid #2c3e50;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 4px;
            position: relative;
            overflow: hidden;
        }

        .property:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 10;
            position: relative;
        }

        .property.clicked {
            background: #f1c40f;
        }

        .property.quiz::after {
            content: '‚ùì';
            position: absolute;
            top: 2px;
            left: 4px;
            font-size: 0.8rem;
            color: #e74c3c;
        }

        .property.has-image {
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
        }

        .property.has-image .hotel-name,
        .property.has-image .hotel-location {
            background: rgba(255,255,255,0.9);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .color-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 20px;
        }

        .hotel-name {
            font-weight: bold;
            font-size: 0.75rem;
            color: #2c3e50;
            margin-top: 22px;
            line-height: 1;
        }

        .hotel-location {
            font-size: 0.6rem;
            color: #7f8c8d;
            margin-top: 2px;
        }

        /* Coins */
        .corner {
            font-weight: bold;
            font-size: 0.8rem;
        }

        .corner .icon {
            font-size: 2rem;
            margin: 5px 0;
        }

        .go {
            grid-column: 1;
            grid-row: 1;
            background: #E4CBA5;
            color: #14143A;
            font-weight: bold;
        }

        .jail {
            grid-column: 1;
            grid-row: 6;
            background: #e67e22;
            color: white;
        }

        .parking {
            grid-column: 6;
            grid-row: 6;
            background: #3498db;
            color: white;
        }

        .gare-rennes {
            grid-column: 6;
            grid-row: 1;
            background: #34495e;
            color: white;
        }

        /* Cases du bas - Row 6 */
        .bottom1 { grid-column: 5; grid-row: 6; }
        .bottom2 { grid-column: 4; grid-row: 6; }
        .bottom3 { grid-column: 3; grid-row: 6; }
        .bottom4 { grid-column: 2; grid-row: 6; }

        /* Cases de gauche - Column 1 */
        .left1 { grid-column: 1; grid-row: 5; }
        .left2 { grid-column: 1; grid-row: 4; }
        .left3 { grid-column: 1; grid-row: 3; }
        .left4 { grid-column: 1; grid-row: 2; }

        /* Cases du haut - Row 1 */
        .top1 { grid-column: 2; grid-row: 1; }
        .top2 { grid-column: 3; grid-row: 1; }
        .top3 { grid-column: 4; grid-row: 1; }
        .top4 { grid-column: 5; grid-row: 1; }

        /* Cases de droite - Column 6 */
        .right1 { grid-column: 6; grid-row: 2; }
        .right2 { grid-column: 6; grid-row: 3; }
        .right3 { grid-column: 6; grid-row: 4; }
        .right4 { grid-column: 6; grid-row: 5; }

        /* Modal pour messages */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            animation: slideIn 0.3s;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal h3 {
            color: #e74c3c;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .modal p {
            color: #34495e;
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-line;
        }

        .modal-author {
            font-style: italic;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #ecf0f1;
            padding-top: 15px;
        }

        .close {
            position: absolute;
            right: 15px;
            top: 15px;
            color: #bdc3c7;
            font-size: 28px;
            cursor: pointer;
        }

        .close:hover {
            color: #34495e;
        }

        /* Modal pour questions */
        .quiz-modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }

        .quiz-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 15% auto;
            padding: 35px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: bounceIn 0.5s;
            color: white;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .quiz-content h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .quiz-content p {
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .quiz-input {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-button {
            background: white;
            color: #764ba2;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            margin: 0 5px;
        }

        .quiz-button:hover {
            transform: scale(1.05);
        }

        .quiz-button.solution {
            background: #f39c12;
            color: white;
        }

        .choice-button {
            background: white;
            color: #764ba2;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            margin: 10px;
            display: block;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        .choice-button:hover {
            transform: scale(1.05);
            background: #f8f8f8;
        }

        .quiz-hint {
            font-size: 0.9rem;
            margin-top: 15px;
            opacity: 0.9;
        }

        .solution-display {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .wrong-answer {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .progress-section {
            margin-top: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            max-width: 500px;
            width: 100%;
        }

        .progress-title {
            font-size: 0.8rem;
            color: #95a5a6;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-count {
            color: #14143A;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #E4CBA5, #d4b995);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(228, 203, 165, 0.3);
        }

        .achievement {
            display: none;
            margin-top: 12px;
            padding: 12px;
            background: linear-gradient(90deg, #E4CBA5, #d4b995);
            color: #14143A;
            border-radius: 8px;
            animation: pop 0.5s;
            text-align: center;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
        }

        @keyframes pop {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .achievement.show {
            display: block;
        }

        /* Bouton Reset */
        .reset-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #95a5a6;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reset-button:hover {
            background: #e74c3c;
            transform: scale(1.1) rotate(180deg);
        }

        .reset-tooltip {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: #2c3e50;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .reset-button:hover .reset-tooltip {
            opacity: 1;
        }

        @media (max-width: 550px) {
            .board {
                width: 350px;
                height: 350px;
                grid-template-columns: 65px repeat(4, 55px) 65px;
                grid-template-rows: 65px repeat(4, 55px) 65px;
            }
            
            .center h2 {
                font-size: 2.5rem;
            }
            
            .center p {
                font-size: 0.9rem;
            }
            
            .property {
                font-size: 0.5rem;
            }
            
            .hotel-name {
                font-size: 0.65rem;
            }
            
            .corner .icon {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Monop<span class="gold">ALL</span>y</h1>
    </div>

    <div class="board-container">
        <div class="board">
            <!-- Centre du plateau -->
            <div class="center">
                <h2>10 ANS</h2>
                <p>de bons et<br>LOYAUX services</p>
                <button onclick="randomMessage()">üé≤ Message Surprise</button>
            </div>

            <!-- Coins -->
            <div class="property corner go" onclick="showMessage('depart')">
                <div>D√âPART</div>
                <div class="icon">‚Üí</div>
                <div>10 ANS!</div>
            </div>
            <div class="property corner gare-rennes quiz" onclick="showChoiceQuiz('gare')">
                <div>GARE</div>
                <div class="icon">üöÇ</div>
                <div>RENNES</div>
            </div>
            <div class="property corner parking" onclick="showMessage('kouloungoula')">
                <div>KOULOUN</div>
                <div class="icon">üëΩ</div>
                <div>GOULA</div>
            </div>
            <div class="property corner jail" onclick="showMessage('pause')">
                <div>PAUSE</div>
                <div class="icon">‚òï</div>
                <div>CAF√â</div>
            </div>

            <!-- Cases du bas (4) - 2 marrons, 2 bleus -->
            <div class="property bottom1" onclick="showMessage('ibis')">
                <div class="color-bar" style="background: #8B4513;"></div>
                <div class="hotel-name">Ibis F√®s</div>
                <div class="hotel-location">Maroc</div>
            </div>
            <div class="property bottom2" onclick="showMessage('novotel')">
                <div class="color-bar" style="background: #8B4513;"></div>
                <div class="hotel-name">Novotel</div>
                <div class="hotel-location">Global</div>
            </div>
            <div class="property bottom3" onclick="showMessage('mercure')">
                <div class="color-bar" style="background: #87CEEB;"></div>
                <div class="hotel-name">Mercure</div>
                <div class="hotel-location">Lorient</div>
            </div>
            <div class="property bottom4" onclick="showMessage('pullman')">
                <div class="color-bar" style="background: #87CEEB;"></div>
                <div class="hotel-name">Pullman</div>
                <div class="hotel-location">Business</div>
            </div>

            <!-- Cases de gauche (4) -->
            <div class="property left1" onclick="showMessage('sofitel')">
                <div class="color-bar" style="background: #FF69B4;"></div>
                <div class="hotel-name">Sofitel</div>
                <div class="hotel-location">?</div>
            </div>
            <div class="property left2" onclick="showMessage('mgallery')">
                <div class="color-bar" style="background: #FF69B4;"></div>
                <div class="hotel-name">MGallery</div>
                <div class="hotel-location">Collection</div>
            </div>
            <div class="property left3" onclick="showMessage('aiglenoir')">
                <div class="color-bar" style="background: #FFA500;"></div>
                <div class="hotel-name">Aigle Noir</div>
                <div class="hotel-location">Fontainebleau</div>
            </div>
            <div class="property left4" onclick="showMessage('mama')">
                <div class="color-bar" style="background: #FFA500;"></div>
                <div class="hotel-name">Mama Shelter</div>
                <div class="hotel-location">Lifestyle</div>
            </div>

            <!-- Cases du haut (4) -->
            <div class="property top1" onclick="showMessage('adagio')">
                <div class="color-bar" style="background: #DC143C;"></div>
                <div class="hotel-name">Adagio</div>
                <div class="hotel-location">3 ans</div>
            </div>
            <div class="property top2" onclick="showMessage('orient')">
                <div class="color-bar" style="background: #DC143C;"></div>
                <div class="hotel-name">Orient Express</div>
                <div class="hotel-location">Legend</div>
            </div>
            <div class="property top3" onclick="showMessage('joe')">
                <div class="color-bar" style="background: #FFFF00;"></div>
                <div class="hotel-name">JO&JOE</div>
                <div class="hotel-location">Gentilly</div>
            </div>
            <div class="property top4" onclick="showMessage('ibisbudget')">
                <div class="color-bar" style="background: #FFFF00;"></div>
                <div class="hotel-name">Ibis Budget</div>
                <div class="hotel-location">chambre de 9m2</div>
            </div>

            <!-- Cases de droite (4) -->
            <div class="property right1" onclick="showMessage('raffles')">
                <div class="color-bar" style="background: #008000;"></div>
                <div class="hotel-name">Raffles</div>
                <div class="hotel-location">Warsaw</div>
            </div>
            <div class="property right2" onclick="showMessage('mayakoba')">
                <div class="color-bar" style="background: #008000;"></div>
                <div class="hotel-name">Fairmont</div>
                <div class="hotel-location">MayaKoba</div>
            </div>
            <div class="property right3" onclick="showMessage('fairmont')">
                <div class="color-bar" style="background: #00008B;"></div>
                <div class="hotel-name">Fairmont</div>
                <div class="hotel-location">Monaco</div>
            </div>
            <div class="property right4" onclick="showMessage('swissotel')">
                <div class="color-bar" style="background: #00008B;"></div>
                <div class="hotel-name">Brand</div>
                <div class="hotel-location">ville ou pr√©cision</div>
            </div>
        </div>
    </div>

    <div class="progress-section">
        <div class="progress-title">
            <span>D√©couverte</span>
            <span class="progress-count" id="progressText">0/20</span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        <div class="achievement" id="achievement">
            üéä Bravo ! Toutes les cases ont √©t√© d√©couvertes ! üéä
        </div>
    </div>

    <!-- Bouton Reset -->
    <button class="reset-button" onclick="resetBoard()">
        üßπ
        <span class="reset-tooltip">R√©initialiser le plateau</span>
    </button>

    <!-- Modal pour messages -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">Titre</h3>
            <p id="modalMessage">Message</p>
            <div id="modalAuthor" class="modal-author">- Auteur</div>
        </div>
    </div>

    <!-- Modal pour questions -->
    <div id="quizModal" class="quiz-modal">
        <div class="quiz-content" id="quizContent">
            <h3>‚ùì Question Surprise</h3>
            <p id="quizQuestion">Question</p>
            <input type="text" id="quizInput" class="quiz-input" placeholder="Votre r√©ponse..." style="display: none;">
            <div id="choiceButtons" style="display: none;"></div>
            <div id="normalButtons">
                <button class="quiz-button" onclick="checkAnswer()">Valider</button>
                <button class="quiz-button solution" onclick="showSolution()">Solution</button>
                <button class="quiz-button" onclick="closeQuiz()">Annuler</button>
            </div>
            <div class="quiz-hint" id="quizHint" style="display: none;">üí° Indice : </div>
            <div class="solution-display" id="solutionDisplay" style="display: none;">‚úÖ R√©ponse : </div>
        </div>
    </div>

    <script>
        // ========================================
        // CONFIGURATION DES MESSAGES
        // ========================================
        
        const messages = {
            'depart': {
                title: "üéä Le Grand D√©part",
                message: "Il y a 10 ans commen√ßait cette aventure extraordinaire. Votre vision continue de nous inspirer chaque jour!",
                author: "L'√©quipe de direction"
            },
            'raffles': {
                title: "üèÜ Raffles Warsaw",
                message: "Ce projet l√©gendaire restera dans les annales. Votre leadership a transform√© l'impossible en r√©alit√©.",
                author: "Jean-Marc, ancien directeur"
            },
            'adagio': {
                title: "üè† Adagio - 3 ans de souvenirs",
                message: "3 ann√©es exceptionnelles o√π tout a commenc√©. Adagio restera toujours le point de d√©part de cette belle aventure.",
                author: "L'√©quipe Adagio",
                imageUrl: "https://github.com/JulieChemille/Monopally/blob/main/Patrick.jpg"
            },
            'ibis': {
                title: "üåç Ibis F√®s Adventure",
                message: "De Paris √† F√®s, votre vision transcende les fronti√®res. Ce projet reste un mod√®le d'expansion r√©ussie.",
                author: "Rachid, Directeur Maroc"
            },
            'mercure': {
                title: "‚öì Mercure Lorient",
                message: "La Bretagne, terre de caract√®re, comme vous! Cet h√¥tel incarne votre attachement √† l'authenticit√©.",
                author: "√âquipe Bretagne"
            },
            'mayakoba': {
                title: "üå¥ MayaKobracass√©",
                message: "Parce que je pensais qu'un mois de passation avec toi √ßa serait tr√®s bien et que finalement j'ai pris du ferme pour plusieurs ann√©es et que j'apprends encore. Merci X√©na !",
                author: "Nico"
            },
            'aiglenoir': {
                title: "üëë L'Aigle Noir Fontainebleau",
                message: "Un palace MGallery qui porte bien son nom. Comme l'aigle, vous voyez loin et visez toujours plus haut.",
                author: "Philippe, MGallery"
            },
            'sofitel': {
                title: "‚ú® Sofitel Excellence",
                message: "Le luxe √† la fran√ßaise, c'est votre signature. Merci pour ces ann√©es d'excellence absolue.",
                author: "Marie, Luxury Division"
            },
            'orient': {
                title: "üöÇ Orient Express Legend",
                message: "Comme ce train mythique, votre parcours est l√©gendaire. 10 ans de voyage extraordinaire!",
                author: "Heritage Team"
            },
            'mama': {
                title: "‚ù§Ô∏è Mama Shelter Spirit",
                message: "Votre c√¥t√© 'Mama' protectrice de l'√©quipe, on ne l'oubliera jamais. Quelle famille!",
                author: "La Mama's Tribe"
            },
            'novotel': {
                title: "üåü Novotel Innovation",
                message: "Moderniser sans d√©naturer, votre talent unique. Novotel vous doit sa renaissance.",
                author: "Innovation Lab"
            },
            'pullman': {
                title: "üíº Pullman Business Class",
                message: "Le voyage d'affaires version premium, c'est votre cr√©ation. Visionnaire!",
                author: "Corporate Team"
            },
            'brand': {
                title: "üéØ Brand Strategy",
                message: "Votre vision de la marque a transform√© notre approche. Un leadership inspirant!",
                author: "Brand Team"
            },
            'mgallery': {
                title: "üë∂ MGallery & Les Jumeaux",
                message: "F√©licitations ! Vous connaissez bien l'√©quipe ! Alexandre et ses jumeaux vous remercient pour votre attention. Cette collection d'h√¥tels uniques, comme chaque membre de notre √©quipe, a une histoire sp√©ciale.",
                author: "Alexandre Aoustet et toute l'√©quipe MGallery"
            },
            'swissotel': {
                title: "üèîÔ∏è Swiss√¥tel Precision",
                message: "La pr√©cision suisse avec la passion fran√ßaise. Votre recette du succ√®s!",
                author: "Hans, Zurich"
            },
            'fairmont': {
                title: "üå™Ô∏è Comme un Ouragan",
                message: "Un tonnerre d'√©nergie, une tornade de bonne humeur, une loyaut√© sans faille. Jamais aucun orage n'√©loigne la bonne humeur et ta dispo pour nous aider, nous faire rire, nous soutenir. Allum√©e ma vie, tu es un incendie qu'on ne peut plus arr√™ter.",
                author: "La Grande St√©phanie du 12√®me"
            },
            'ibisbudget': {
                title: "üå± Ibis Budget",
                message: "L'√©co-responsabilit√©, votre vision d'avant-garde. Le futur, c'est maintenant!",
                author: "Green Team"
            },
            'joe': {
                title: "üé≠ JO&JOE Generation",
                message: "Toujours connect√©e aux nouvelles g√©n√©rations. Votre √©nergie est contagieuse!",
                author: "Millennials Squad"
            },
            'pause': {
                title: "‚òï Pause Caf√© M√©rit√©e",
                message: "10 ans de caf√©s partag√©s, d'id√©es √©chang√©es, de rires... Ces moments pr√©cieux qui construisent une √©quipe.",
                author: "Coffee Lovers Club"
            },
            'kouloungoula': {
                title: "üëΩ Kouloungoula",
                message: "Yahouu !",
                author: "Khalil"
            },
            'gare_timothee': {
                title: "üöÇ Gare de Rennes - M√©moire d'√âquipe",
                message: "Impressionnant ! Vous vous souvenez vraiment de tout ! L'anciennet√© de notre doyen lors de votre cong√© maternit√©... Cette attention aux d√©tails fait de vous une leader exceptionnelle. Rennes se souvient de votre passage!",
                author: "L'√©quipe historique de Rennes"
            },
            'gare_ja': {
                title: "üí™ Dans la douleur & Dans le fun !",
                message: "Merci de partager tous tes moments de vie paradisiaques ! Joyeux anniversaire ma super coll√®gue ! üéâ\n\nJ'esp√®re encore partager plein de beaux moments avec toi : que ce soit nos discussions parentales quand ta petite se retrouve en culotte apr√®s avoir jou√© avec le jet d'eau, nos longues sessions de d√©pannage sur des petits bugs qui impactent la perf √† n'en plus savoir o√π, ou simplement mes tentatives d'humour que tu supportes si bien !",
                author: "JA"
            }
        };

        // ========================================
        // QUESTIONS QUIZ
        // ========================================
        
        const quizData = {
            // Plus de quiz pour ces cases
        };

        // Quiz avec choix multiple pour la gare
        const choiceQuizData = {
            'gare': {
                question: "Avec qui souhaites-tu monter dans le train ?",
                choices: [
                    { text: "JA", value: "gare_ja" },
                    { text: "Timoth√©e", value: "gare_timothee" }
                ]
            }
        };

        // ========================================
        // LOGIQUE DU JEU
        // ========================================
        
        let currentQuiz = null;
        let clickedProperties = new Set();
        let messagesViewed = new Set();
        const totalProperties = 20;
        let propertyMapping = {};

        // Cr√©er un mapping entre les propri√©t√©s et leurs √©l√©ments DOM
        function initPropertyMapping() {
            const properties = document.querySelectorAll('.property');
            properties.forEach(prop => {
                const onclick = prop.getAttribute('onclick');
                if (onclick) {
                    const match = onclick.match(/show(?:Message|Quiz|ChoiceQuiz)\('([^']+)'\)/);
                    if (match) {
                        propertyMapping[match[1]] = prop;
                    }
                }
            });
            
            // Ajouter l'image √† Adagio si elle existe
            const adagioMessage = messages['adagio'];
            if (adagioMessage && adagioMessage.image && propertyMapping['adagio']) {
                const adagioElement = propertyMapping['adagio'];
                adagioElement.classList.add('has-image');
                adagioElement.style.backgroundImage = "url('" + adagioMessage.image + "')";
            }
        }

        function showChoiceQuiz(property) {
            currentQuiz = property;
            const quiz = choiceQuizData[property];
            
            document.getElementById('quizQuestion').textContent = quiz.question;
            document.getElementById('quizInput').style.display = 'none';
            document.getElementById('normalButtons').style.display = 'none';
            document.getElementById('quizHint').style.display = 'none';
            document.getElementById('solutionDisplay').style.display = 'none';
            
            // Cr√©er les boutons de choix
            const choiceContainer = document.getElementById('choiceButtons');
            choiceContainer.innerHTML = '';
            choiceContainer.style.display = 'block';
            
            quiz.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-button';
                button.textContent = choice.text;
                button.onclick = () => {
                    closeQuiz();
                    showMessage(choice.value);
                    if (propertyMapping[property]) {
                        propertyMapping[property].classList.add('clicked');
                    }
                };
                choiceContainer.appendChild(button);
            });
            
            // Ajouter bouton annuler
            const cancelButton = document.createElement('button');
            cancelButton.className = 'quiz-button';
            cancelButton.textContent = 'Annuler';
            cancelButton.onclick = closeQuiz;
            cancelButton.style.marginTop = '20px';
            choiceContainer.appendChild(cancelButton);
            
            document.getElementById('quizModal').style.display = 'block';
        }

        function showQuiz(property) {
            currentQuiz = property;
            const quiz = quizData[property];
            
            // Reset l'affichage
            document.getElementById('quizQuestion').textContent = quiz.question;
            document.getElementById('quizInput').value = '';
            document.getElementById('quizInput').style.display = 'block';
            document.getElementById('normalButtons').style.display = 'block';
            document.getElementById('choiceButtons').style.display = 'none';
            document.getElementById('quizHint').style.display = 'none';
            document.getElementById('solutionDisplay').style.display = 'none';
            document.getElementById('quizModal').style.display = 'block';
            document.getElementById('quizContent').classList.remove('wrong-answer');
            
            setTimeout(() => {
                document.getElementById('quizInput').focus();
            }, 300);
        }

        function checkAnswer() {
            const quiz = quizData[currentQuiz];
            const userAnswer = document.getElementById('quizInput').value.toLowerCase().trim();
            
            const isCorrect = quiz.answer.some(answer => 
                userAnswer === answer.toLowerCase()
            );
            
            if (isCorrect) {
                closeQuiz();
                showMessage(currentQuiz);
                if (propertyMapping[currentQuiz]) {
                    propertyMapping[currentQuiz].classList.add('clicked');
                }
            } else {
                quiz.attempts++;
                document.getElementById('quizContent').classList.add('wrong-answer');
                
                if (quiz.attempts >= 2) {
                    document.getElementById('quizHint').textContent = 'üí° Indice : ' + quiz.hint;
                    document.getElementById('quizHint').style.display = 'block';
                }
                
                setTimeout(() => {
                    document.getElementById('quizContent').classList.remove('wrong-answer');
                }, 500);
            }
        }

        function showSolution() {
            const quiz = quizData[currentQuiz];
            
            document.getElementById('solutionDisplay').textContent = '‚úÖ R√©ponse : ' + quiz.displayAnswer;
            document.getElementById('solutionDisplay').style.display = 'block';
            
            setTimeout(() => {
                closeQuiz();
                showMessage(currentQuiz);
                if (propertyMapping[currentQuiz]) {
                    propertyMapping[currentQuiz].classList.add('clicked');
                }
            }, 2000);
        }

        function closeQuiz() {
            document.getElementById('quizModal').style.display = 'none';
            currentQuiz = null;
        }

        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('quizModal').style.display === 'block' && document.getElementById('quizInput').style.display !== 'none') {
                checkAnswer();
            }
        });

        function updateProgress() {
            const progress = (messagesViewed.size / totalProperties) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = messagesViewed.size + '/20';
            
            if (messagesViewed.size === totalProperties) {
                document.getElementById('achievement').classList.add('show');
                setTimeout(() => {
                    confetti();
                }, 500);
            }
        }

        function showMessage(property, fromRandom = false) {
            const message = messages[property];
            if (!message) return;
            
            document.getElementById('modalTitle').textContent = message.title;
            
            // V√©rifier si il y a une image
            if (message.imageUrl) {
                // Utiliser innerHTML seulement si il y a une image
                let imageHtml = '<img src="' + message.imageUrl + '" style="width: 100%; max-width: 300px; border-radius: 10px; margin-bottom: 15px;"><br>';
                document.getElementById('modalMessage').innerHTML = imageHtml + message.message;
            } else {
                // Utiliser textContent pour les messages sans image (plus s√ªr)
                document.getElementById('modalMessage').textContent = message.message;
            }
            
            document.getElementById('modalAuthor').textContent = '- ' + message.author;
            
            document.getElementById('messageModal').style.display = 'block';
            
            // Marquer le message comme vu
            if (!messagesViewed.has(property)) {
                messagesViewed.add(property);
                updateProgress();
            }
            
            // Marquer la case visuellement
            if (propertyMapping[property] && !propertyMapping[property].classList.contains('clicked')) {
                propertyMapping[property].classList.add('clicked');
                clickedProperties.add(property);
            }
        }

        function randomMessage() {
            const keys = Object.keys(messages).filter(key => !['gare_ja', 'gare_timothee'].includes(key));
            const unviewedMessages = keys.filter(key => !messagesViewed.has(key));
            
            const availableMessages = unviewedMessages.length > 0 ? unviewedMessages : keys;
            const randomKey = availableMessages[Math.floor(Math.random() * availableMessages.length)];
            
            if (quizData[randomKey]) {
                showQuiz(randomKey);
            } else if (choiceQuizData[randomKey]) {
                showChoiceQuiz(randomKey);
            } else {
                showMessage(randomKey, true);
            }
        }

        function closeModal() {
            document.getElementById('messageModal').style.display = 'none';
        }

        function resetBoard() {
            if (confirm("Voulez-vous vraiment r√©initialiser le plateau ?\nToute la progression sera perdue.")) {
                clickedProperties.clear();
                messagesViewed.clear();
                
                Object.keys(quizData).forEach(key => {
                    quizData[key].attempts = 0;
                });
                
                document.querySelectorAll('.property.clicked').forEach(prop => {
                    prop.classList.remove('clicked');
                });
                
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('progressText').textContent = '0/20';
                document.getElementById('achievement').classList.remove('show');
            }
        }

        function confetti() {
            const colors = ['#e74c3c', '#f1c40f', '#3498db', '#27ae60', '#9b59b6', '#E4CBA5', '#14143A'];
            
            // Cr√©er une animation unique pour les confettis
            if (!document.getElementById('confetti-styles')) {
                const style = document.createElement('style');
                style.id = 'confetti-styles';
                style.textContent = `
                    @keyframes fall {
                        to {
                            transform: translateY(100vh) rotate(720deg);
                            opacity: 0;
                        }
                    }
                    @keyframes fall-left {
                        to {
                            transform: translateY(100vh) translateX(-50px) rotate(720deg);
                            opacity: 0;
                        }
                    }
                    @keyframes fall-right {
                        to {
                            transform: translateY(100vh) translateX(50px) rotate(720deg);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Cr√©er 100 confettis
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetto = document.createElement('div');
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const size = Math.random() * 10 + 5; // Entre 5 et 15px
                    const leftPos = Math.random() * 100;
                    const animDuration = Math.random() * 3 + 2; // Entre 2 et 5 secondes
                    const animations = ['fall', 'fall-left', 'fall-right'];
                    const animation = animations[Math.floor(Math.random() * animations.length)];
                    
                    confetto.style.cssText = 'position: fixed; width: ' + size + 'px; height: ' + size + 
                        'px; background: ' + color + '; left: ' + leftPos + 
                        '%; top: -20px; z-index: 9999; animation: ' + animation + ' ' + 
                        animDuration + 's linear forwards; border-radius: 50%;';
                    
                    document.body.appendChild(confetto);
                    setTimeout(() => confetto.remove(), animDuration * 1000);
                }, i * 20);
            }
        }

        window.onclick = function(event) {
            const modal = document.getElementById('messageModal');
            if (event.target === modal) {
                closeModal();
            }
            const quiz = document.getElementById('quizModal');
            if (event.target === quiz) {
                closeQuiz();
            }
        }

        // Initialiser au chargement
        window.addEventListener('load', function() {
            initPropertyMapping();
            console.log('MonopALLy charg√© avec succ√®s!');
            console.log('20 cases disponibles, quiz interactifs actifs');
        });
    </script>
</body>
</html>
